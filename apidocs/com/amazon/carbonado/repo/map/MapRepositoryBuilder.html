<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Tue Dec 03 13:53:41 PST 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>MapRepositoryBuilder (Carbonado 1.2.3 API)</title>
<meta name="date" content="2013-12-03">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MapRepositoryBuilder (Carbonado 1.2.3 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MapRepositoryBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/amazon/carbonado/repo/map/MapRepositoryBuilder.html" target="_top">Frames</a></li>
<li><a href="MapRepositoryBuilder.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.amazon.carbonado.repo.map</div>
<h2 title="Class MapRepositoryBuilder" class="title">Class MapRepositoryBuilder</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../../com/amazon/carbonado/spi/AbstractRepositoryBuilder.html" title="class in com.amazon.carbonado.spi">com.amazon.carbonado.spi.AbstractRepositoryBuilder</a></li>
<li>
<ul class="inheritance">
<li>com.amazon.carbonado.repo.map.MapRepositoryBuilder</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../com/amazon/carbonado/RepositoryBuilder.html" title="interface in com.amazon.carbonado">RepositoryBuilder</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">MapRepositoryBuilder</span>
extends <a href="../../../../../com/amazon/carbonado/spi/AbstractRepositoryBuilder.html" title="class in com.amazon.carbonado.spi">AbstractRepositoryBuilder</a></pre>
<div class="block">Volatile repository implementation backed by a concurrent map. Locks used by
 repository are coarse, much like <i>table locks</i>. Loads and queries
 acquire read locks, and modifications acquire write locks. Within
 transactions, loads and queries always acquire upgradable locks, to reduce
 the likelihood of deadlock.

 <p>This repository supports transactions, which also may be
 nested. Supported isolation levels are read committed and serializable. Read
 uncommitted is promoted to read committed, and repeatable read is promoted
 to serializable.

 <p>
 The following extra capabilities are supported:
 <ul>
 <li><a href="../../../../../com/amazon/carbonado/capability/IndexInfoCapability.html" title="interface in com.amazon.carbonado.capability"><code>IndexInfoCapability</code></a>
 <li><a href="../../../../../com/amazon/carbonado/capability/ShutdownCapability.html" title="interface in com.amazon.carbonado.capability"><code>ShutdownCapability</code></a>
 <li><a href="../../../../../com/amazon/carbonado/sequence/SequenceCapability.html" title="interface in com.amazon.carbonado.sequence"><code>SequenceCapability</code></a>
 </ul>

 <p>Note: This repository uses concurrent navigable map classes, which became
 available in JDK1.6.</div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>1.2</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Brian S O'Neill</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#MapRepositoryBuilder()">MapRepositoryBuilder</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../com/amazon/carbonado/Repository.html" title="interface in com.amazon.carbonado">Repository</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#build(java.util.concurrent.atomic.AtomicReference)">build</a></strong>(java.util.concurrent.atomic.AtomicReference&lt;<a href="../../../../../com/amazon/carbonado/Repository.html" title="interface in com.amazon.carbonado">Repository</a>&gt;&nbsp;rootRef)</code>
<div class="block">Builds a repository instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#getLockTimeout()">getLockTimeout</a></strong>()</code>
<div class="block">Returns the lock timeout.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.concurrent.TimeUnit</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#getLockTimeoutUnit()">getLockTimeoutUnit</a></strong>()</code>
<div class="block">Returns the lock timeout unit.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#getName()">getName</a></strong>()</code>
<div class="block">Returns the name of the repository.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#isMaster()">isMaster</a></strong>()</code>
<div class="block">Returns true if repository should assume the role of master, which is
 true by default.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../../../com/amazon/carbonado/Repository.html" title="interface in com.amazon.carbonado">Repository</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#newRepository()">newRepository</a></strong>()</code>
<div class="block">Convenience method to build a new MapRepository.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#setLockTimeout(int, java.util.concurrent.TimeUnit)">setLockTimeout</a></strong>(int&nbsp;timeout,
              java.util.concurrent.TimeUnit&nbsp;unit)</code>
<div class="block">Set the lock timeout.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#setLockTimeoutMillis(int)">setLockTimeoutMillis</a></strong>(int&nbsp;timeout)</code>
<div class="block">Set the lock timeout, in milliseconds.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#setMaster(boolean)">setMaster</a></strong>(boolean&nbsp;b)</code>
<div class="block">Set to false if repository should not assume the role of master.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/amazon/carbonado/repo/map/MapRepositoryBuilder.html#setName(java.lang.String)">setName</a></strong>(java.lang.String&nbsp;name)</code>
<div class="block">Set name for the repository, which is required.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.amazon.carbonado.spi.AbstractRepositoryBuilder">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.amazon.carbonado.spi.<a href="../../../../../com/amazon/carbonado/spi/AbstractRepositoryBuilder.html" title="class in com.amazon.carbonado.spi">AbstractRepositoryBuilder</a></h3>
<code><a href="../../../../../com/amazon/carbonado/spi/AbstractRepositoryBuilder.html#addTriggerFactory(com.amazon.carbonado.TriggerFactory)">addTriggerFactory</a>, <a href="../../../../../com/amazon/carbonado/spi/AbstractRepositoryBuilder.html#assertReady()">assertReady</a>, <a href="../../../../../com/amazon/carbonado/spi/AbstractRepositoryBuilder.html#build()">build</a>, <a href="../../../../../com/amazon/carbonado/spi/AbstractRepositoryBuilder.html#errorCheck(java.util.Collection)">errorCheck</a>, <a href="../../../../../com/amazon/carbonado/spi/AbstractRepositoryBuilder.html#getTriggerFactories()">getTriggerFactories</a>, <a href="../../../../../com/amazon/carbonado/spi/AbstractRepositoryBuilder.html#removeTriggerFactory(com.amazon.carbonado.TriggerFactory)">removeTriggerFactory</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MapRepositoryBuilder()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MapRepositoryBuilder</h4>
<pre>public&nbsp;MapRepositoryBuilder()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="newRepository()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newRepository</h4>
<pre>public static&nbsp;<a href="../../../../../com/amazon/carbonado/Repository.html" title="interface in com.amazon.carbonado">Repository</a>&nbsp;newRepository()</pre>
<div class="block">Convenience method to build a new MapRepository.</div>
</li>
</ul>
<a name="build(java.util.concurrent.atomic.AtomicReference)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>build</h4>
<pre>public&nbsp;<a href="../../../../../com/amazon/carbonado/Repository.html" title="interface in com.amazon.carbonado">Repository</a>&nbsp;build(java.util.concurrent.atomic.AtomicReference&lt;<a href="../../../../../com/amazon/carbonado/Repository.html" title="interface in com.amazon.carbonado">Repository</a>&gt;&nbsp;rootRef)
                 throws <a href="../../../../../com/amazon/carbonado/RepositoryException.html" title="class in com.amazon.carbonado">RepositoryException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../com/amazon/carbonado/RepositoryBuilder.html#build(java.util.concurrent.atomic.AtomicReference)">RepositoryBuilder</a></code></strong></div>
<div class="block">Builds a repository instance.

 <p>If the repository is being wrapped by a parent repository, the child
 repository will need to know this fact for some operations to work
 correctly. Since the parent repository is not built yet, a reference is
 used instead.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>rootRef</code> - reference to root parent repository, to be set by
 parent repository upon being built</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../com/amazon/carbonado/ConfigurationException.html" title="class in com.amazon.carbonado">ConfigurationException</a></code> - if there is a problem in the builder's configuration</dd>
<dd><code><a href="../../../../../com/amazon/carbonado/RepositoryException.html" title="class in com.amazon.carbonado">RepositoryException</a></code> - if there is a general problem opening the repository</dd></dl>
</li>
</ul>
<a name="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getName()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../com/amazon/carbonado/RepositoryBuilder.html#getName()">RepositoryBuilder</a></code></strong></div>
<div class="block">Returns the name of the repository.</div>
</li>
</ul>
<a name="setName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setName</h4>
<pre>public&nbsp;void&nbsp;setName(java.lang.String&nbsp;name)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../com/amazon/carbonado/RepositoryBuilder.html#setName(java.lang.String)">RepositoryBuilder</a></code></strong></div>
<div class="block">Set name for the repository, which is required.</div>
</li>
</ul>
<a name="isMaster()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isMaster</h4>
<pre>public&nbsp;boolean&nbsp;isMaster()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../com/amazon/carbonado/RepositoryBuilder.html#isMaster()">RepositoryBuilder</a></code></strong></div>
<div class="block">Returns true if repository should assume the role of master, which is
 true by default. Repositories that link different repositories together
 will designate only one as the master.

 <p>A master repository is responsible for <a href="../../../../../com/amazon/carbonado/Version.html" title="annotation in com.amazon.carbonado"><code>version</code></a> and
 <a href="../../../../../com/amazon/carbonado/Sequence.html" title="annotation in com.amazon.carbonado"><code>sequence</code></a> properties. For insert operations, a master
 repository must set these properties if they are uninitialized. For
 updates, the version property is checked to see if an <a href="../../../../../com/amazon/carbonado/OptimisticLockException.html" title="class in com.amazon.carbonado"><code>OptimisticLockException</code></a> should be thrown.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/amazon/carbonado/repo/replicated/ReplicatedRepositoryBuilder.html" title="class in com.amazon.carbonado.repo.replicated"><code>ReplicatedRepositoryBuilder</code></a></dd></dl>
</li>
</ul>
<a name="setMaster(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaster</h4>
<pre>public&nbsp;void&nbsp;setMaster(boolean&nbsp;b)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../com/amazon/carbonado/RepositoryBuilder.html#setMaster(boolean)">RepositoryBuilder</a></code></strong></div>
<div class="block">Set to false if repository should not assume the role of master. By
 default, this option is true. Repositories that link different
 repositories together will designate only one as the master.

 <p>A master repository is responsible for <a href="../../../../../com/amazon/carbonado/Version.html" title="annotation in com.amazon.carbonado"><code>version</code></a> and
 <a href="../../../../../com/amazon/carbonado/Sequence.html" title="annotation in com.amazon.carbonado"><code>sequence</code></a> properties. For insert operations, a master
 repository must set these properties if they are uninitialized. For
 updates, the version property is checked to see if an <a href="../../../../../com/amazon/carbonado/OptimisticLockException.html" title="class in com.amazon.carbonado"><code>OptimisticLockException</code></a> should be thrown.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../com/amazon/carbonado/repo/replicated/ReplicatedRepositoryBuilder.html" title="class in com.amazon.carbonado.repo.replicated"><code>ReplicatedRepositoryBuilder</code></a></dd></dl>
</li>
</ul>
<a name="setLockTimeoutMillis(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLockTimeoutMillis</h4>
<pre>public&nbsp;void&nbsp;setLockTimeoutMillis(int&nbsp;timeout)</pre>
<div class="block">Set the lock timeout, in milliseconds. Default value is 500 milliseconds.</div>
</li>
</ul>
<a name="setLockTimeout(int, java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLockTimeout</h4>
<pre>public&nbsp;void&nbsp;setLockTimeout(int&nbsp;timeout,
                  java.util.concurrent.TimeUnit&nbsp;unit)</pre>
<div class="block">Set the lock timeout. Default value is 500 milliseconds.</div>
</li>
</ul>
<a name="getLockTimeout()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLockTimeout</h4>
<pre>public&nbsp;int&nbsp;getLockTimeout()</pre>
<div class="block">Returns the lock timeout. Call getLockTimeoutUnit to get the unit.</div>
</li>
</ul>
<a name="getLockTimeoutUnit()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getLockTimeoutUnit</h4>
<pre>public&nbsp;java.util.concurrent.TimeUnit&nbsp;getLockTimeoutUnit()</pre>
<div class="block">Returns the lock timeout unit. Call getLockTimeout to get the timeout.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MapRepositoryBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/amazon/carbonado/repo/map/MapRepositoryBuilder.html" target="_top">Frames</a></li>
<li><a href="MapRepositoryBuilder.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006-2013 <a href="https://github.com/Carbonado/Carbonado">Amazon Technologies, Inc.</a>. All Rights Reserved.</small></p>
</body>
</html>
